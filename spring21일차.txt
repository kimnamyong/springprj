스프링 21일차

//스프링관련용어
DI(의존성주입)
Object Mapper(ORM)
AOP
영속성컨텍스트
엔티티(Entity)와 DTO
서비스와 트랜잭션과 롤백
컨트롤러와 서비스와 리파지토리
맵퍼와 리파지토리
mybatis와 JPA
jsp/mustache/thymeleaf
ViewResolver
디스패쳐 dispatcher
Data Source
RestController와 Controller
ResponseBody/RequestBody
RequestParamer
PathVariable
인터셉터와 세션
연관관계의 주인 mapped by
영속성컨텍스트->dirty 체킹
@Transactional
Optional
spring security
------------------------
///////// 프로젝트
board(게시판)-mustache
blog(블로그)-jsp
쇼핑몰-thymeleaf
게시판-thymeleaf
프로젝트 시험문제-
/////////
---------------------------
스프링(jsp)
30번게시판 
회원가입중복검사하기

일관성, 무결성
정합성

버튼
아이디중복여부검사


27장-> 31번

joinForm.jsp
user.js

mybatis
#{username}

jpa
?1 
?2

//  header.jsp


header.jsp ->회원탈퇴 버튼생성
회원탈퇴 버튼 클릭

userController.java
return deleteForm.jsp
 uri를 생성한다.   /user/{id}/delete

userDelete.jsp
id/username/ 비밀번호/ 
검사 폼(deleteForm.jsp)

회원탈퇴완료 버튼클릭
-> user.js로 ajax 요청

UserApiController.java
에서 id/아이디/비밀번호/
를 받고 

UserService.java에서 
회원탈퇴 서비스처리
  findByUserName와 password를 검사해서 
있으면 탈퇴처리한다.


 boardRepository.deleteByUserId(user3.getId());


1) 서비스단에 게시글과 답글을 모두 삭제한다. 

@Transactional 처리

boardRepository.deleteByUserId(user3.getId());  
userRepository.deleteById(id);

 

2) MySQL에서 Board의 외래키 설정을 cascade->REMOVE로 설정한다.

 

3) 엔티티에 아래와 같이 설정한다.

@OneToMany(mappedBy="user", fetch=FetchType.EAGER, cascade = CascadeType.REMOVE)

// 외래키 연결된 레코드 삭제처리하기

1번사용자가 작성한 게시글 삭제하기
delete from board where userId=1

1) 서비스단에서 모두삭제하기
 boardRepository.deleteByUserId(user3.getId());
       userRepository.deleteById(id);

2) MySQL에서 설정하기
외래키를 cascade로 설정한다.

3) 엔티티에서 설정하기
user.java 엔티티


34번게시판
댓글등록화면 디자인

31번게시판 댓글목록뿌리기

36번게시판 댓글작성하기

replies

33장 댓글삭제하기
맨밑에 댓글 등록개수 지정하기
details.jsp





























